<?xml version="1.0"?>
<project name="JHU Decoder" default="compile" basedir=".">
	<property name="src" value="./src" />
	<property name="test" value="./test" />
	<property name="build" value="./bin" />
	<property name="doc" value="./javadoc" />
	<property name="testng" value="./lib/testng-5.8-jdk15.jar"/>

	<taskdef resource="testngtasks" classpath="${testng}"/>


	<target name="test" depends="compile,compile-tests">

	<testng classpath="bin" sourcedir="test">
	   <xmlfileset dir="." includes="testng.xml"/>
	   </testng>
	   
	   <!--
	   <java classpath="lib/testng-5.8-jdk15.jar:bin" classname="org.testng.TestNG">
	   <arg line="testng.xml" />
	   </java>
	   -->
	   </target>

	<target name="init">
	<!-- Create the time stamp -->
	<tstamp/>
	<!-- Create the build directory structure used by compile -->
	<mkdir dir="${build}"/>
	</target>

	<target name="compile" depends="init"> 
	  <!-- Compile the java code -->
	  <javac compiler="javac1.5" srcdir="${src}" destdir="${build}" debug="on"/> 
	</target>


	<target name="compile-tests" depends="init"> 
	  <!-- Compile the java code -->
	  <javac compiler="javac1.5" srcdir="${test}" destdir="${build}" classpath="${testng}" debug="on"/> 
	</target>
	
	<target name="javadoc">
	<mkdir dir="${doc}"/>
		<!-- Compile the java code -->
                <javadoc packagenames="edu.*"
                         sourcepath="${src}"
                         destdir="${doc}"
                         author="true"
                         version="true"
                />
	</target>
	
	<target name="clean">
		<!-- remove class files -->
		<delete verbose="true">
                <!-- Remove all *.class files in this directory  -->
			<fileset dir="${build}">
				<include name="**/*.class"/>
			</fileset>
		</delete>
	</target>
	
	<target name="jar">
		<jar destfile="${build}/jhu.jar">
			<fileset dir="${build}">
				<include name="**/*.class"/>
			</fileset>
		</jar>
	</target>

	<target name="source">
		<jar destfile="${build}/jhu.jar">
			<fileset dir="${build}">
				<include name="**/*.java"/>
				<include name="**/*.class"/>
			</fileset>
		</jar>
	</target>
</project>

